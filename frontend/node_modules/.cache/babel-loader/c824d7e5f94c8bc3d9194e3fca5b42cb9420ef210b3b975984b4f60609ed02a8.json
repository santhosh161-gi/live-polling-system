{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\santhosh\\\\Downloads\\\\live-polling\\\\frontend\\\\src\\\\pages\\\\Student.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport socket from '../socket';\nimport { nanoid } from 'nanoid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Student() {\n  _s();\n  const [poll, setPoll] = useState(null);\n  const [studentName, setStudentName] = useState('');\n  const [studentId, setStudentId] = useState(localStorage.getItem('studentId') || '');\n  const [answered, setAnswered] = useState(false);\n  useEffect(() => {\n    // ensure studentId\n    if (!studentId) {\n      const id = nanoid(10);\n      localStorage.setItem('studentId', id);\n      setStudentId(id);\n    }\n    socket.on('pollStarted', p => {\n      setPoll(p);\n      setAnswered(false);\n    });\n    socket.on('pollUpdated', p => setPoll(p));\n    socket.on('pollEnded', () => setPoll(null));\n    socket.on('alreadyAnswered', () => setAnswered(true));\n\n    // initial active poll fetch (optional)\n    fetch('/api/polls/active').then(r => r.json()).then(p => {\n      if (p) setPoll(p);\n    }).catch(() => {});\n    return () => {\n      socket.off('pollStarted');\n      socket.off('pollUpdated');\n      socket.off('pollEnded');\n    };\n  }, [studentId]);\n  const submit = optionId => {\n    if (!studentName.trim()) {\n      const name = prompt('Please enter your name (display)');\n      if (!name) return;\n      setStudentName(name);\n    }\n    socket.emit('submitAnswer', {\n      pollId: poll._id,\n      optionId,\n      studentId\n    });\n    setAnswered(true);\n  };\n  if (!poll) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"No active poll\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 26\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: poll.question\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), answered ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: poll.options.map(o => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [o.text, \" \\u2014 \", o.votes]\n      }, o.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 34\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this) : poll.options.map(o => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => submit(o.id),\n      children: o.text\n    }, o.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(Student, \"FD8XmJxfiI3GqahLdofnW2/GN2A=\");\n_c = Student;\nvar _c;\n$RefreshReg$(_c, \"Student\");","map":{"version":3,"names":["React","useState","useEffect","socket","nanoid","jsxDEV","_jsxDEV","Student","_s","poll","setPoll","studentName","setStudentName","studentId","setStudentId","localStorage","getItem","answered","setAnswered","id","setItem","on","p","fetch","then","r","json","catch","off","submit","optionId","trim","name","prompt","emit","pollId","_id","children","fileName","_jsxFileName","lineNumber","columnNumber","question","options","map","o","text","votes","onClick","_c","$RefreshReg$"],"sources":["C:/Users/santhosh/Downloads/live-polling/frontend/src/pages/Student.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport socket from '../socket';\r\nimport { nanoid } from 'nanoid';\r\n\r\nexport default function Student() {\r\n  const [poll, setPoll] = useState(null);\r\n  const [studentName, setStudentName] = useState('');\r\n  const [studentId, setStudentId] = useState(localStorage.getItem('studentId') || '');\r\n  const [answered, setAnswered] = useState(false);\r\n\r\n  useEffect(()=>{\r\n    // ensure studentId\r\n    if (!studentId) {\r\n      const id = nanoid(10);\r\n      localStorage.setItem('studentId', id);\r\n      setStudentId(id);\r\n    }\r\n\r\n    socket.on('pollStarted', p => { setPoll(p); setAnswered(false); });\r\n    socket.on('pollUpdated', p => setPoll(p));\r\n    socket.on('pollEnded', ()=> setPoll(null));\r\n    socket.on('alreadyAnswered', ()=> setAnswered(true));\r\n\r\n    // initial active poll fetch (optional)\r\n    fetch('/api/polls/active').then(r=>r.json()).then(p=>{\r\n      if (p) setPoll(p);\r\n    }).catch(()=>{});\r\n    return ()=> { socket.off('pollStarted'); socket.off('pollUpdated'); socket.off('pollEnded'); }\r\n  },[studentId]);\r\n\r\n  const submit = (optionId) => {\r\n    if (!studentName.trim()) {\r\n      const name = prompt('Please enter your name (display)');\r\n      if (!name) return;\r\n      setStudentName(name);\r\n    }\r\n    socket.emit('submitAnswer', { pollId: poll._id, optionId, studentId });\r\n    setAnswered(true);\r\n  };\r\n\r\n  if (!poll) return <div><h2>No active poll</h2></div>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>{poll.question}</h2>\r\n      {answered ? (\r\n        <ul>\r\n          {poll.options.map(o => <li key={o.id}>{o.text} â€” {o.votes}</li>)}\r\n        </ul>\r\n      ) : (\r\n        poll.options.map(o =>\r\n          <button key={o.id} onClick={()=>submit(o.id)}>{o.text}</button>\r\n        )\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}