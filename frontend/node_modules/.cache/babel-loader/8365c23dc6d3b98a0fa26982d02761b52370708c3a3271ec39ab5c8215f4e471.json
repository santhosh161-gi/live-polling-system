{"ast":null,"code":"import React,{useState,useEffect}from'react';import socket from'../socket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Teacher(){const[question,setQuestion]=useState('');const[options,setOptions]=useState(['','']);const[activePoll,setActivePoll]=useState(null);useEffect(()=>{socket.on('pollStarted',p=>setActivePoll(p));socket.on('pollUpdated',p=>setActivePoll(p));socket.on('pollEnded',()=>setActivePoll(null));return()=>{socket.off('pollStarted');socket.off('pollUpdated');socket.off('pollEnded');};},[]);const addOption=()=>setOptions([...options,'']);const setOpt=(i,v)=>{const copy=[...options];copy[i]=v;setOptions(copy);};const createPoll=()=>{const cleaned=options.map(o=>o.trim()).filter(Boolean);if(!question.trim()||cleaned.length<2)return alert('Add question and at least 2 options');socket.emit('createPoll',{question,options:cleaned});setQuestion('');setOptions(['','']);};const endPoll=()=>{if(!activePoll)return;socket.emit('endPoll',{pollId:activePoll._id});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Teacher Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Question\",value:question,onChange:e=>setQuestion(e.target.value)}),options.map((o,i)=>/*#__PURE__*/_jsx(\"input\",{value:o,onChange:e=>setOpt(i,e.target.value),placeholder:\"Option \".concat(i+1)},i)),/*#__PURE__*/_jsx(\"button\",{onClick:addOption,children:\"Add option\"}),/*#__PURE__*/_jsx(\"button\",{onClick:createPoll,children:\"Start Poll\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Active Poll\"}),!activePoll?/*#__PURE__*/_jsx(\"p\",{children:\"No active poll\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:activePoll.question}),/*#__PURE__*/_jsx(\"ul\",{children:activePoll.options.map(opt=>/*#__PURE__*/_jsxs(\"li\",{children:[opt.text,\" \\u2014 \",opt.votes]},opt.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:endPoll,children:\"End Poll\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","socket","jsx","_jsx","jsxs","_jsxs","Teacher","question","setQuestion","options","setOptions","activePoll","setActivePoll","on","p","off","addOption","setOpt","i","v","copy","createPoll","cleaned","map","o","trim","filter","Boolean","length","alert","emit","endPoll","pollId","_id","children","placeholder","value","onChange","e","target","concat","onClick","opt","text","votes","id"],"sources":["C:/Users/santhosh/Downloads/live-polling/frontend/src/pages/Teacher.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport socket from '../socket';\r\n\r\nexport default function Teacher() {\r\n  const [question, setQuestion] = useState('');\r\n  const [options, setOptions] = useState(['','']);\r\n  const [activePoll, setActivePoll] = useState(null);\r\n\r\n  useEffect(()=>{\r\n    socket.on('pollStarted', p => setActivePoll(p));\r\n    socket.on('pollUpdated', p => setActivePoll(p));\r\n    socket.on('pollEnded', () => setActivePoll(null));\r\n    return ()=> {\r\n      socket.off('pollStarted'); socket.off('pollUpdated'); socket.off('pollEnded');\r\n    };\r\n  },[]);\r\n\r\n  const addOption = () => setOptions([...options, '']);\r\n  const setOpt = (i,v) => { const copy=[...options]; copy[i]=v; setOptions(copy); };\r\n\r\n  const createPoll = () => {\r\n    const cleaned = options.map(o => o.trim()).filter(Boolean);\r\n    if (!question.trim() || cleaned.length < 2) return alert('Add question and at least 2 options');\r\n    socket.emit('createPoll', { question, options: cleaned });\r\n    setQuestion(''); setOptions(['','']);\r\n  };\r\n\r\n  const endPoll = () => {\r\n    if (!activePoll) return;\r\n    socket.emit('endPoll', { pollId: activePoll._id });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Teacher Dashboard</h1>\r\n      <div>\r\n        <input placeholder=\"Question\" value={question} onChange={e=>setQuestion(e.target.value)} />\r\n        {options.map((o,i)=>(\r\n          <input key={i} value={o} onChange={e=>setOpt(i,e.target.value)} placeholder={`Option ${i+1}`} />\r\n        ))}\r\n        <button onClick={addOption}>Add option</button>\r\n        <button onClick={createPoll}>Start Poll</button>\r\n      </div>\r\n\r\n      <hr/>\r\n\r\n      <h2>Active Poll</h2>\r\n      {!activePoll ? <p>No active poll</p> : (\r\n        <div>\r\n          <h3>{activePoll.question}</h3>\r\n          <ul>\r\n            {activePoll.options.map(opt=>(\r\n              <li key={opt.id}>{opt.text} â€” {opt.votes}</li>\r\n            ))}\r\n          </ul>\r\n          <button onClick={endPoll}>End Poll</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}